#!/usr/bin/env python

import sys
import os
sys.path.append(os.path.join(os.path.dirname(__file__), os.path.pardir))
import ktbh
from optparse import OptionParser
import ConfigParser

def get_config():
    config_file = os.path.join(os.path.dirname(__file__), 
			       os.path.pardir,
			       "etc", "ktbh.conf")
    config = ConfigParser.ConfigParser()
    config.read(config_file)
    return config

def run():
    config = get_config()
    parser = OptionParser()

    options, args = parser.parse_args()

    assert len(args) >= 1

    driver = ktbh.KTBH(config)
    
    if args[0] == "addlp":
        url = args[1]
        driver.add_landing_page(url)
        return

    if args[0] == "examine_lps":
        driver.examine_landing_pages()
        return

    if args[0] == "stash_unscrapables":
        driver.stash_unscrapables()
        return

if __name__ == '__main__':
    run()
